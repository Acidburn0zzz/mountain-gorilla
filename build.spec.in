#set -o xtrace
set -o errexit
set -o pipefail

cat <<HERE;
{
  "no-internet": "false",

  "build-tgz": "true",
  "bits-url": "(unused because build passes in BITS_URL envvar)",
  "bits-branch": "(unused because build uses a local dir BITS_URL)",

  "platform-release": "$(ls bits/platform/platform*.tgz | xargs basename | cut -d- -f2)",
  "sdcboot-release": "$(ls bits/sdcboot/sdcboot*.tgz | xargs basename | cut -d- -f2)",
  "firmware-tools-release": "$(ls bits/firmware-tools/firmware-tools*.tgz | xargs basename | cut -d- -f3)",
  "agents-shar": "$(ls bits/agentsshar/agents-*.sh | xargs basename | cut -d- -f2)",

  "adminui-tarball": "adminui/$(ls bits/adminui/adminui-pkg* | xargs basename)",
  "amon-tarball": "amon/$(ls bits/amon/amon-pkg* | xargs basename)",
  "assets-tarball": "assets/$(ls bits/assets/assets-pkg* | xargs basename)",
  "binder-tarball": "binder/$(ls bits/binder/binder-pkg* | xargs basename)",
  "ca-tarball": "ca/$(ls bits/ca/ca-pkg* | xargs basename)",
  "cloudapi-tarball": "cloudapi/$(ls bits/cloudapi/cloudapi-pkg* | xargs basename)",
  "cnapi-tarball": "cnapi/$(ls bits/cnapi/cnapi-pkg* | xargs basename)",
  "dapi-tarball": "dapi/$(ls bits/dapi/dapi-pkg* | xargs basename)",
  "dhcpd-tarball": "dhcpd/$(ls bits/dhcpd/dhcpd-pkg* | xargs basename)",
  "fwapi-tarball": "fwapi/$(ls bits/fwapi/fwapi-pkg* | xargs basename)",
  "imgapi-tarball": "imgapi/$(ls bits/imgapi/imgapi-pkg* | xargs basename)",
  "imgapi-cli-tarball": "imgapi-cli/$(ls bits/imgapi-cli/imgapi-cli-pkg* | xargs basename)",
  "keyapi-tarball": "keyapi/$(ls bits/keyapi/keyapi-pkg* | xargs basename)",
  "manatee-tarball": "manatee/$(ls bits/manatee/manatee-pkg* | xargs basename)",
  "manta-tools": "manta/$(ls bits/manta/manta-pkg* | xargs basename)",
  "manta-tarball": "manta-deployment/$(ls bits/manta-deployment/manta-deployment-pkg* | xargs basename)",
  "moray-tarball": "moray/$(ls bits/moray/moray-pkg* | xargs basename)",
  "napi-tarball": "napi/$(ls bits/napi/napi-pkg* | xargs basename)",
  "rabbitmq-tarball": "rabbitmq/$(ls bits/rabbitmq/rabbitmq-pkg* | xargs basename)",
  "redis-tarball": "redis/$(ls bits/redis/redis-pkg* | xargs basename)",
  "sapi-tarball": "sapi/$(ls bits/sapi/sapi-pkg* | xargs basename)",
  "sdcsso-tarball": "sdcsso/$(ls bits/sdcsso/sdcsso-pkg* | xargs basename)",
  "ufds-tarball": "ufds/$(ls bits/ufds/ufds-pkg* | xargs basename)",
  "usageapi-tarball": "usageapi/$(ls bits/usageapi/usageapi-pkg* | xargs basename)",
  "vmapi-tarball": "vmapi/$(ls bits/vmapi/vmapi-pkg* | xargs basename)",
  "workflow-tarball": "workflow/$(ls bits/workflow/workflow-pkg* | xargs basename)",

  "// *-image": "This should be kept in sync with usb-headnode.git/build.spec",
  "adminui-image": "adminui/$(ls bits/adminui/adminui-zfs-*manifest | xargs basename)",
  "amon-image": "amon/$(ls bits/amon/amon-zfs-*manifest | xargs basename)",
  "assets-image": "assets/$(ls bits/assets/assets-zfs-*manifest | xargs basename)",
  "binder-image": "binder/$(ls bits/binder/binder-zfs-*manifest | xargs basename)",
  "ca-image": "ca/$(ls bits/ca/ca-zfs-*manifest | xargs basename)",
  "cloudapi-image": "cloudapi/$(ls bits/cloudapi/cloudapi-zfs-*manifest | xargs basename)",
  "cnapi-image": "cnapi/$(ls bits/cnapi/cnapi-zfs-*manifest | xargs basename)",
  "dapi-image": "dapi/$(ls bits/dapi/dapi-zfs-*manifest | xargs basename)",
  "dhcpd-image": "dhcpd/$(ls bits/dhcpd/dhcpd-zfs-*manifest | xargs basename)",
  "fwapi-image": "fwapi/$(ls bits/fwapi/fwapi-zfs-*manifest | xargs basename)",
  "imgapi-image": "imgapi/$(ls bits/imgapi/imgapi-zfs-*manifest | xargs basename)",
  "keyapi-image": "keyapi/$(ls bits/keyapi/keyapi-zfs-*manifest | xargs basename)",
  "manatee-image": "manatee/$(ls bits/manatee/manatee-zfs-*manifest | xargs basename)",
  "moray-image": "moray/$(ls bits/moray/moray-zfs-*manifest | xargs basename)",
  "napi-image": "napi/$(ls bits/napi/napi-zfs-*manifest | xargs basename)",
  "rabbitmq-image": "rabbitmq/$(ls bits/rabbitmq/rabbitmq-zfs-*manifest | xargs basename)",
  "redis-image": "redis/$(ls bits/redis/redis-zfs-*manifest | xargs basename)",
  "sapi-image": "sapi/$(ls bits/sapi/sapi-zfs-*manifest | xargs basename)",
  "sdcsso-image": "sdcsso/$(ls bits/sdcsso/sdcsso-zfs-*manifest | xargs basename)",
  "ufds-image": "ufds/$(ls bits/ufds/ufds-zfs-*manifest | xargs basename)",
  "usageapi-image": "usageapi/$(ls bits/usageapi/usageapi-zfs-*manifest | xargs basename)",
  "vmapi-image": "vmapi/$(ls bits/vmapi/vmapi-zfs-*manifest | xargs basename)",
  "workflow-image": "workflow/$(ls bits/workflow/workflow-zfs-*manifest | xargs basename)"
}
HERE
